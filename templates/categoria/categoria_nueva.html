{% extends 'base.html' %}

{% block title %}Cocina con Cheff Nava - Nuevo categoria{% endblock %}

{% block content %}
  <div class="contact-form">
    <div class="container">
      <h2>Agregar Nuevo categoria</h2>
      <form action="{{ url_for('categoria.ruta_crear_categoria') }}" enctype="multipart/form-data" method="post" onsubmit="return redirigirGestionCategorias();>
        <div class="mb-3">
          <label for="nombre">Nombre de la Categoria:</label>
          <input type="text" id="nombre" name="nombre" placeholder="Introduce el nombre del categoria" required>
        </div>
        <div class="mb-3">
          <label for="descripcion">Descripción:</label>
          <textarea id="descripcion" name="descripcion" placeholder="Escribe una descripción del categoria" required></textarea>
        </div>
        <div class="mb-3">
          <span>Imagen</span>
          <label for="imagen" class="form-label" placeholder="Seleccione una imagen.."></label>
          <!-- Campo para cargar imagen -->
          <input type="file" class="form-control" id="imagen" name="imagen" accept="image/*" required />
        </div>
        <!-- Botones alineados en una fila -->
        <div class="d-flex justify-content-between mt-3">
          <button type="submit" class="btn btn-access">Agregar</button>
          <a href="{{ url_for('categoria.mostrar_categorias') }}" class="btn btn-secondary">Volver</a>
        </div>        
      </form>
    </div>
  </div>

  <!-- Script para redirigir tras la actualización -->
  <script>
    function redirigirGestionCategorias() {
      setTimeout(function() {
        window.location.href = "{{ url_for('categoria.mostrar_categorias') }}";
      }, 1000);
      return true; // Permitir que el formulario se envíe
    }
  </script>
{% endblock %}
